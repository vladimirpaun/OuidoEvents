<!DOCTYPE html>
<html lang="ro">
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/plugins/monthSelect/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ouidoEvents · CRM Proprietari V3</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #0052D4;
            --secondary-color: #4364F7;
            --accent-color: #00B4D8;
            --dark-color: #1a202c;
            --gray-color: #555555;
            --muted-color: #7a7f87;
            --light-gray-color: #f0f2f5;
            --bg-color: #f8f9fa;
            --white-color: #ffffff;
            --border-color: #e5eaf1;
            --shadow-color: rgba(67, 100, 247, 0.15);
            --border-radius: 16px;
            --sidebar-width: 296px;
            --header-height: 74px;
        }

        *, *::before, *::after {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            min-height: 100vh;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            color: var(--dark-color);
            background-color: var(--bg-color);
            line-height: 1.5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        a {
            color: inherit;
            text-decoration: none;
        }

        button {
            font: inherit;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        main.crm-shell {
            display: grid;
            grid-template-columns: var(--sidebar-width) 1fr;
            min-height: calc(100vh - var(--header-height));
            background: linear-gradient(135deg, rgba(67, 100, 247, 0.06), rgba(0, 82, 212, 0.02));
        }

        .crm-sidebar {
            position: sticky;
            top: var(--header-height);
            height: calc(100vh - var(--header-height));
            background: var(--white-color);
            border-right: 1px solid var(--border-color);
            box-shadow: 12px 0 40px -34px rgba(67, 100, 247, 0.55);
            padding: 32px 26px;
            display: flex;
            flex-direction: column;
            gap: 28px;
        }

        .crm-sidebar h2 {
            font-size: 1.25rem;
            margin: 0 0 6px;
        }

        .crm-sidebar p {
            color: var(--muted-color);
            font-size: 0.92rem;
            margin: 0;
        }

        .crm-nav {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .crm-nav-section label {
            font-size: 0.78rem;
            font-weight: 600;
            color: var(--muted-color);
            text-transform: uppercase;
            letter-spacing: 0.12em;
            margin-bottom: 10px;
            display: block;
        }

        .crm-nav-links {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .crm-nav-link {
            width: 100%;
            border: 1px solid transparent;
            border-radius: 14px;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--gray-color);
            font-weight: 500;
            background: transparent;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .crm-nav-link svg {
            width: 18px;
            height: 18px;
            opacity: 0.7;
        }

        .crm-nav-link:hover,
        .crm-nav-link.is-active {
            background: rgba(67, 100, 247, 0.1);
            border-color: rgba(0, 82, 212, 0.24);
            color: var(--primary-color);
            box-shadow: inset 0 0 0 1px rgba(0, 82, 212, 0.18);
        }

        .crm-sidebar-footer {
            margin-top: auto;
            background: rgba(0, 82, 212, 0.08);
            border-radius: 16px;
            padding: 18px;
        }

        .crm-sidebar-footer h3 {
            font-size: 0.96rem;
            margin: 0 0 4px;
        }

        .crm-sidebar-footer p {
            font-size: 0.85rem;
            margin-bottom: 10px;
        }

        .crm-sidebar-footer a {
            display: inline-flex;
            gap: 8px;
            align-items: center;
            font-weight: 600;
            color: var(--primary-color);
            font-size: 0.9rem;
        }

        .crm-pages {
            padding: calc(var(--header-height) + 20px) 48px 60px;
            display: flex;
            flex-direction: column;
            gap: 36px;
        }

        .crm-page {
            display: none;
            flex-direction: column;
            gap: 28px;
            animation: fadeIn 0.24s ease;
        }

        .crm-page.is-active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page-header {
            background: var(--white-color);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            padding: 28px 32px;
            box-shadow: 0 28px 50px -48px rgba(67, 100, 247, 0.8);
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .page-header-top {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 24px;
            flex-wrap: wrap;
        }

        .page-header h1 {
            font-size: 1.8rem;
            margin: 0 0 4px;
        }

        .page-header p {
            margin: 0;
            color: var(--muted-color);
            max-width: 520px;
        }

        .page-header-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .crm-page[data-page="bookings"] .page-header-top {
            flex-direction: column;
            align-items: flex-start;
        }

        .crm-page[data-page="bookings"] .page-header-actions {
            width: 100%;
            justify-content: flex-start;
        }

        .crm-button {
            border-radius: 999px;
            padding: 10px 22px;
            border: 1px solid transparent;
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .crm-button.primary {
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            color: var(--white-color);
            box-shadow: 0 16px 24px -24px rgba(0, 82, 212, 0.9);
        }

        .crm-button.ghost {
            background: transparent;
            border-color: rgba(0, 82, 212, 0.2);
            color: var(--primary-color);
        }

        .crm-button.sm {
            padding: 6px 16px;
            font-size: 0.85rem;
        }

        .crm-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 16px 26px -24px rgba(67, 100, 247, 0.8);
        }

        .context-tags {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .context-tag {
            background: rgba(0, 82, 212, 0.08);
            color: var(--primary-color);
            border-radius: 999px;
            padding: 6px 12px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        /* NOU: Stil pentru rândul evidențiat în tabel */
        @keyframes highlight-fade {
            from { box-shadow: 0 0 0 4px rgba(67, 100, 247, 0.32); }
            to { box-shadow: 0 0 0 0 rgba(67, 100, 247, 0); }
        }
        .detail-layout {
            display: grid;
            gap: 24px;
        }
        .detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }
        .detail-sections {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 18px;
        }
        .detail-card {
            background: var(--white-color);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            padding: 20px 22px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            box-shadow: 0 24px 48px -44px rgba(15, 23, 42, 0.45);
        }
        .detail-card h3 {
            margin: 0;
            font-size: 1rem;
        }
        .detail-list {
            display: grid;
            gap: 12px;
        }
        .detail-list-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        .detail-list-label {
            font-size: 0.78rem;
            text-transform: uppercase;
            letter-spacing: 0.04em;
            color: var(--muted-color);
        }
        .detail-list-value {
            font-size: 0.96rem;
            font-weight: 600;
            color: var(--dark-color);
            word-break: break-word;
        }
        .detail-timeline-list {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            gap: 14px;
        }
        .detail-timeline-entry {
            position: relative;
            padding-left: 18px;
        }
        .detail-timeline-entry::before {
            content: '';
            position: absolute;
            left: 0;
            top: 8px;
            width: 10px;
            height: 10px;
            border-radius: 999px;
            background: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(0, 82, 212, 0.1);
        }
        .detail-timeline-status {
            font-weight: 600;
            color: var(--dark-color);
            font-size: 0.95rem;
        }
        .detail-timeline-meta {
            font-size: 0.78rem;
            color: var(--muted-color);
        }
        .detail-timeline-reason {
            margin-top: 4px;
            font-size: 0.84rem;
            color: var(--gray-color);
        }
        .detail-timeline-empty {
            font-size: 0.9rem;
            color: var(--muted-color);
        }
        .detail-note-area {
            background: rgba(67, 100, 247, 0.06);
            border-radius: 14px;
            border: 1px dashed rgba(0, 82, 212, 0.2);
            padding: 16px 18px;
            font-size: 0.92rem;
            color: var(--dark-color);
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .detail-note-area span {
            display: block;
            font-size: 0.78rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--muted-color);
            margin: 0;
        }
        .detail-note-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
        }
        .detail-note-header .crm-button {
            flex-shrink: 0;
        }
        .detail-note-input {
            width: 100%;
            min-height: 140px;
            border-radius: 12px;
            border: 1px solid rgba(0, 82, 212, 0.18);
            background: var(--white-color);
            padding: 12px 14px;
            font-family: inherit;
            font-size: 0.92rem;
            line-height: 1.45;
            color: var(--dark-color);
            resize: vertical;
        }
        .detail-note-input::placeholder {
            color: var(--muted-color);
        }


        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
            gap: 18px;
        }

        .metrics-grid.metrics-grid--compact {
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
        }

        .is-missing-value {
            color: #b91c1c;
            font-weight: 600;
        }

        .metric-card {
            background: var(--white-color);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            padding: 22px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            box-shadow: 0 22px 32px -42px rgba(67, 100, 247, 0.85);
            align-items: flex-start;
            justify-content: space-between;
        }

        .metrics-grid--compact .metric-card {
            padding: 10px 12px;
            gap: 4px;
            box-shadow: none;
            min-height: 78px;
            border-radius: 14px;
        }

        .metrics-grid--compact .metric-card strong {
            font-size: 1.1rem;
            align-self: flex-end;
            margin-top: auto;
        }

        .metrics-grid--compact .metric-card span {
            font-size: 0.7rem;
        }

        .metric-card span {
            color: var(--muted-color);
            font-size: 0.85rem;
        }

        .metric-card strong {
            font-size: 1.6rem;
        }

        .metric-trend {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85rem;
            color: #0a7d5c;
        }

        .panel {
            background: var(--white-color);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            padding: 26px 28px;
            display: flex;
            flex-direction: column;
            gap: 18px;
            box-shadow: 0 30px 48px -52px rgba(67, 100, 247, 0.85);
        }

        .panel header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 16px;
            flex-wrap: wrap;
        }

        .panel header h2 {
            margin: 0;
            font-size: 1.1rem;
        }

        .panel-meta {
            color: var(--muted-color);
            font-size: 0.85rem;
        }

        .automation-toast {
            display: none;
            background: rgba(124, 58, 237, 0.12);
            border: 1px solid rgba(124, 58, 237, 0.24);
            color: #5b21b6;
            border-radius: 12px;
            padding: 12px 16px;
            font-size: 0.82rem;
        }

        .automation-toast.is-visible {
            display: block;
        }

        .list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .list-item {
            display: flex;
            justify-content: space-between;
            gap: 16px;
            border-bottom: 1px solid rgba(0, 82, 212, 0.08);
            padding-bottom: 12px;
        }

        .list-item-actions {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: flex-end;
        }

        .list-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        /* NOU: Stil pentru elementele interactive din liste */
        #overview-bookings-list .list-item,
        #overview-events-list .list-item,
        #overview-viewings-list .list-item {
            cursor: pointer;
            transition: background-color 0.2s ease;
            border-radius: 8px;
            margin: -4px;
            padding: 4px;
        }
        #overview-bookings-list .list-item:hover,
        #overview-events-list .list-item:hover,
        #overview-viewings-list .list-item:hover {
            background-color: rgba(0, 82, 212, 0.04);
        }

        /* NOU: Stil pentru legenda statusurilor */
        .list-item span {
            color: var(--muted-color);
            font-size: 0.85rem;
        }

        .status-chip {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 4px 22px;
            border-radius: 16px;
            font-size: 0.8rem;
            font-weight: 600;
            background: rgba(0, 82, 212, 0.1);
            color: var(--primary-color);
            width: clamp(220px, 60%, 420px);
            box-sizing: border-box;
            text-align: center;
            white-space: nowrap;
        }

        .status-chip.status-chip--compact {
            padding: 4px 14px;
            width: clamp(140px, 36%, 260px);
        }

        /* Culori sincronizate cu logica JS */
        .status-chip[data-status="availability_request"] { background: rgba(245, 158, 11, 0.22); color: #b45309; }
        .status-chip[data-status="availability_confirmed"] { background: rgba(59, 130, 246, 0.22); color: #2563eb; }
        .status-chip[data-status="offer_requested"] { background: rgba(168, 85, 247, 0.22); color: #7c3aed; }
        .status-chip[data-status="offer_sent"] { background: rgba(139, 92, 246, 0.22); color: #6c2bd9; }
        .status-chip[data-status="viewing_request"] { background: rgba(14, 165, 233, 0.22); color: #0c7ab5; }
        .status-chip[data-status="viewing_rescheduled"] { background: rgba(56, 189, 248, 0.22); color: #0369a1; }
        .status-chip[data-status="viewing_scheduled"] { background: rgba(37, 99, 235, 0.22); color: #1d4ed8; }
        .status-chip[data-status="pre_booked"] { background: rgba(20, 184, 166, 0.22); color: #0f766e; }
        .status-chip[data-status="confirmed"] { background: rgba(21, 128, 61, 0.22); color: #166534; }
        .status-chip[data-status="rejected"] { background: rgba(185, 28, 28, 0.22); color: #991b1b; }
        .status-chip[data-status="cancelled"] { background: rgba(239, 68, 68, 0.22); color: #b91c1c; }
        .status-chip[data-status="pending"] { background: rgba(245, 158, 11, 0.22); color: #b45309; }
        .status-chip[data-status="awaiting"] { background: rgba(59, 130, 246, 0.22); color: #1d4ed8; }

        .status-secondary {
            display: block;
            font-size: 0.75rem;
            color: var(--muted-color);
            margin-top: 6px;
        }

        .booking-row,
        .viewing-row {
            display: flex;
            flex-direction: column;
            gap: 14px;
            background: var(--white-color);
            border: 1px solid var(--border-color);
            border-radius: 18px;
            padding: 18px 20px;
            box-shadow: 0 26px 48px -46px rgba(15, 23, 42, 0.45);
            transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease, background-color 0.2s ease;
        }

        .booking-row-top {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 12px 20px;
        }

        .booking-row-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .booking-row-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--muted-color);
            font-weight: 600;
        }

        .booking-row-value {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--dark-color);
        }

        .booking-row-meta {
            font-size: 0.78rem;
            color: var(--muted-color);
        }

        .booking-row-bottom {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 14px;
            border-top: 1px solid var(--border-color);
            padding-top: 12px;
        }

        .booking-row-controls {
            margin-left: auto;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            position: relative;
        }

        .booking-row-controls .booking-row-actions {
            margin-left: 0;
        }

        .booking-row-status {
            display: flex;
            flex-direction: column;
            gap: 6px;
            align-items: flex-start;
        }

        .booking-row-next-step {
            font-size: 0.78rem;
            color: var(--muted-color);
        }

        .status-menu-trigger {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 1px solid rgba(15, 23, 42, 0.1);
            background: var(--white-color);
            color: var(--gray-color);
            cursor: pointer;
            transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease, color 0.2s ease;
        }

        .status-menu-trigger:hover,
        .status-menu-trigger:focus-visible,
        .status-menu-trigger[aria-expanded="true"] {
            color: var(--primary-color);
            border-color: rgba(0, 82, 212, 0.35);
            background-color: rgba(0, 82, 212, 0.08);
            box-shadow: 0 0 0 2px rgba(0, 82, 212, 0.15);
            outline: none;
        }

        .status-menu {
            position: absolute;
            top: calc(100% + 8px);
            right: 0;
            min-width: 220px;
            padding: 6px 0;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            background: var(--white-color);
            box-shadow: 0 16px 40px -22px rgba(15, 23, 42, 0.35);
            display: none;
            flex-direction: column;
            z-index: 20;
        }

        .status-menu.is-open {
            display: flex;
        }

        .status-menu button {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 2px;
            padding: 10px 16px;
            background: transparent;
            border: none;
            width: 100%;
            text-align: left;
            font-size: 0.9rem;
            color: var(--dark-color);
            cursor: pointer;
            transition: background-color 0.18s ease;
        }

        .status-menu button:hover,
        .status-menu button:focus-visible {
            background-color: rgba(67, 100, 247, 0.08);
            outline: none;
        }

        .status-menu button:disabled,
        .status-menu button[data-current="true"] {
            background-color: rgba(67, 100, 247, 0.12);
            cursor: default;
            opacity: 0.7;
        }

        .status-menu-option-meta {
            font-size: 0.72rem;
            color: var(--muted-color);
        }

        @media (max-width: 768px) {
            .booking-row-top {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            }
            .booking-row-bottom {
                flex-direction: column;
                align-items: flex-start;
            }
            .booking-row-controls {
                margin-left: 0;
                width: 100%;
                justify-content: flex-start;
            }
            .booking-row-status .status-chip {
                width: 100%;
            }
        }


        .grid-three-columns {
            display: grid;
            /* MODIFICAT: Grid cu 3 coloane */
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
        }

        .table-wrapper {
            width: 100%;
            overflow-x: auto;
        }

        table.crm-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 16px;
            min-width: 0;
        }

        table.crm-table thead {
            background: transparent;
        }

        table.crm-table thead th {
            padding: 12px 18px;
            text-align: left;
            font-size: 0.74rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--muted-color);
            background: rgba(0, 82, 212, 0.06);
            border-radius: 14px;
            font-weight: 600;
        }

        table.crm-table tbody tr {
            cursor: pointer;
        }

        table.crm-table tbody td {
            padding: 0;
            border: none;
        }

        table.crm-table tbody tr:hover .booking-row,
        table.crm-table tbody tr:hover .viewing-row {
            border-color: rgba(0, 82, 212, 0.45);
            box-shadow: 0 38px 64px -38px rgba(67, 100, 247, 0.55);
            background-color: rgba(0, 82, 212, 0.04);
            transform: translateY(-3px);
        }

        table.crm-table tbody tr.is-highlighted .booking-row,
        table.crm-table tbody tr.is-highlighted .viewing-row {
            border-color: rgba(0, 82, 212, 0.55);
            box-shadow: 0 0 0 3px rgba(0, 82, 212, 0.18);
            animation: highlight-fade 1.8s ease-out forwards;
        }

        .table-actions {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            justify-content: flex-start;
        }

        .table-actions button {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            border-radius: 999px;
            border: 1px solid rgba(0, 82, 212, 0.2);
            background: transparent;
            color: var(--primary-color);
            padding: 4px 12px;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
        }

        .table-actions button:hover {
            background-color: rgba(0, 82, 212, 0.08);
            border-color: rgba(0, 82, 212, 0.3);
        }

        .table-actions button:focus-visible {
            outline: none;
            border-color: rgba(0, 82, 212, 0.5);
            box-shadow: 0 0 0 2px rgba(0, 82, 212, 0.15);
        }


        .filter-bar {
            display: flex;
            gap: 14px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-bar label {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .filter-bar select,
        .filter-bar input {
            padding: 8px 12px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            font: inherit;
            font-size: 0.9rem;
            background: var(--white-color);
        }

        .availability-legend,
        .availability-grid,
        .availability-summary {
            display: flex;
            gap: 18px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 6px 12px;
            border-radius: 999px;
            border: 1px solid rgba(0, 82, 212, 0.12);
            background: rgba(255, 255, 255, 0.9);
            font-size: 0.85rem;
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .availability-grid {
            width: 100%;
            border: 1px solid rgba(0, 82, 212, 0.12);
            border-radius: 18px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.95);
        }

        .availability-grid table {
            width: 100%;
            border-collapse: collapse;
        }

        .availability-grid th,
        .availability-grid td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid rgba(0, 82, 212, 0.08);
            border-right: 1px solid rgba(0, 82, 212, 0.08);
            font-size: 0.88rem;
        }

        .availability-grid th:last-child,
        .availability-grid td:last-child {
            border-right: none;
        }

        .availability-grid tr:last-child td {
            border-bottom: none;
        }

        .availability-slot[data-status="booked"] {
            background: rgba(0, 82, 212, 0.12);
            color: var(--primary-color);
            font-weight: 600;
        }

        .availability-slot[data-status="hold"] {
            background: rgba(255, 193, 7, 0.18);
            color: #b7791f;
            font-weight: 600;
        }

        .availability-slot[data-status="open"] {
            color: var(--muted-color);
        }

        .venue-grid {
            display: flex;
            flex-direction: column;
            gap: 22px;
        }

        .venue-card {
            display: flex;
            gap: 24px;
            align-items: stretch;
            background: var(--white-color);
            border-radius: 18px;
            border: 1px solid var(--border-color);
            box-shadow: 0 20px 40px -32px rgba(67, 100, 247, 0.45);
            overflow: hidden;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .venue-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 28px 45px -28px rgba(67, 100, 247, 0.55);
        }

        .venue-card-image {
            width: 240px;
            min-height: 210px;
            background-size: cover;
            background-position: center;
            flex-shrink: 0;
            background-image: linear-gradient(135deg, rgba(0, 82, 212, 0.18), rgba(67, 100, 247, 0.28));
        }

        .venue-card-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 16px;
            padding: 22px 26px;
        }

        .venue-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 16px;
        }

        .venue-card-header h3 {
            margin: 0;
            font-size: 1.1rem;
        }

        .venue-card-location {
            margin: 4px 0 0;
            color: var(--muted-color);
            font-size: 0.92rem;
        }

        .venue-card-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 14px;
            font-size: 0.86rem;
            color: var(--muted-color);
        }

        .venue-meta-item {
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .venue-meta-item svg {
            width: 18px;
            height: 18px;
            fill: currentColor;
            opacity: 0.8;
        }

        .venue-card-footer {
            margin-top: auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
            width: 100%;
        }

        .venue-card-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: flex-end;
        }

        .venue-card-actions .crm-button {
            font-size: 0.85rem;
            padding: 8px 16px;
        }

        .venue-card-price {
            font-size: 0.9rem;
            color: var(--dark-color);
            font-weight: 500;
        }

        .venue-card-price strong {
            font-size: 1rem;
            font-weight: 700;
        }

        @media (max-width: 960px) {
            .venue-card {
                flex-direction: column;
            }

            .venue-card-image {
                width: 100%;
                height: 220px;
            }
        }

        .communications-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 18px;
        }

        .communication-card {
            border: 1px solid rgba(0, 82, 212, 0.12);
            border-radius: 18px;
            padding: 18px;
            background: var(--white-color);
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .communication-card header {
            display: flex;
            justify-content: space-between;
            gap: 12px;
            align-items: center;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 24px;
        }

        .settings-card.wide {
            grid-column: 1 / -1;
        }

        @media (min-width: 960px) {
            .settings-grid {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }

        .settings-card {
            border: 1px solid rgba(0, 82, 212, 0.12);
            border-radius: 18px;
            padding: 22px;
            background: rgba(255, 255, 255, 0.96);
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .settings-card label {
            font-weight: 500;
            font-size: 0.9rem;
            color: var(--gray-color);
        }

        .settings-card input,
        .settings-card select,
        .settings-card textarea {
            width: 100%;
            padding: 10px 12px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            font: inherit;
            font-size: 0.92rem;
            background: var(--white-color);
        }

        .settings-toggle {
            display: grid;
            grid-template-columns: 1fr auto;
            align-items: center;
            gap: 24px;
        }

        .settings-toggle span {
            line-height: 1.4;
            text-align: left;
        }

        .settings-toggle span strong {
            display: block;
            color: var(--dark-color);
            font-size: 0.9rem;
        }

        .settings-toggle span small {
            display: block;
            font-size: 0.78rem;
            color: var(--muted-color);
            margin-top: 4px;
        }

        .settings-toggle input[type="checkbox"] {
            justify-self: end;
        }

        .settings-helper {
            font-size: 0.78rem;
            color: var(--muted-color);
            margin: -8px 0 0;
        }

        .settings-helper strong {
            color: var(--dark-color);
        }

        /* NOU: Stiluri pentru graficul interactiv */
        .chart-tooltip {
            font-size: 0.8rem;
            font-weight: 600;
            fill: var(--primary-color);
            text-anchor: middle;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .chart-hit-area:hover + .chart-tooltip {
            opacity: 1;
        }

        .chart-point {
            cursor: pointer;
        }

        /* NOU: Stiluri pentru calendarul lunar */
        .monthly-calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 16px;
        }
        .calendar-nav {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .calendar-nav button {
            background: transparent;
            border: 1px solid var(--border-color);
            border-radius: 50%;
            width: 36px;
            height: 36px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        .calendar-nav button:hover {
            background-color: var(--light-gray-color);
        }
        #availability-month-year {
            font-weight: 600;
            font-size: 1.1rem;
            min-width: 150px;
            text-align: center;
        }
        /* NOU: Stil pentru a face titlul lunii interactiv */
        #availability-month-year, #viewings-month-year {
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 8px;
            transition: background-color 0.2s ease;
        }
        #availability-month-year:hover, #viewings-month-year:hover {
            background-color: var(--light-gray-color);
        }
        .monthly-calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            border-left: 1px solid var(--border-color);
            border-top: 1px solid var(--border-color);
        }
        .calendar-day-header, .calendar-day {
            border-right: 1px solid var(--border-color);
            border-bottom: 1px solid var(--border-color);
        }
        .calendar-day-header {
            text-align: center;
            padding: 8px 0;
            font-weight: 600;
            font-size: 0.8rem;
            color: var(--muted-color);
            background-color: var(--light-gray-color);
        }
        .calendar-day {
            /* MODIFICAT: Înălțime fixă și gestionare overflow */
            height: 120px; 
            padding: 8px;
            font-weight: 500;
            font-size: 0.85rem;
            display: flex;
            flex-direction: column;
            gap: 4px;
            overflow: hidden;
            position: relative;
        }
        /* NOU: Efect de fade-out pentru conținutul care depășește spațiul */
        .calendar-day::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 20px;
            background: linear-gradient(to top, var(--white-color), transparent);
            pointer-events: none;
        }
        .calendar-day.is-other-month {
            background-color: #fcfcfd;
            color: #ccc;
        }
        .calendar-day.is-today .day-number {
            background-color: var(--primary-color);
            color: var(--white-color);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .calendar-event {
            font-size: 0.75rem;
            padding: 2px 6px;
            border-radius: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            cursor: pointer; /* NOU: Indică interactivitate */
        }
        .calendar-event[data-status="booked"] { background-color: rgba(0, 82, 212, 0.15); color: var(--primary-color); }
        .calendar-event[data-status="hold"] { background-color: rgba(245, 158, 11, 0.15); color: #b45309; }
        .calendar-event[data-status="pre_booked"] { background-color: rgba(20, 184, 166, 0.15); color: #0d9488; } /* NOU: Culoare pentru pre-rezervat */
        .calendar-event[data-status="manual_booking"] { background-color: rgba(139, 92, 246, 0.15); color: #7c3aed; } /* NOU: Culoare pentru adăugat manual */

        /* NOU: Stiluri pentru modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(26, 32, 44, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1500;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease-in-out;
        }
        .modal-overlay.is-visible {
            opacity: 1;
            pointer-events: auto;
        }
        .modal-content {
            background-color: var(--white-color);
            border-radius: var(--border-radius);
            padding: 28px 32px;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transform: scale(0.95);
            transition: transform 0.2s ease-in-out;
        }
        .modal-overlay.is-visible .modal-content {
            transform: scale(1);
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .modal-header h3 {
            margin: 0;
            font-size: 1.25rem;
        }
        .modal-close-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--muted-color);
        }
        .modal-body {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .modal-footer {
            margin-top: 24px;
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        /* NOU: Stiluri pentru formularul din modal, inspirate de login.html */
        .modal-body .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            text-align: left;
        }
        .modal-body .form-group label {
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--dark-color);
        }
        .modal-body .form-group input,
        .modal-body .form-group select,
        .modal-body .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            background-color: var(--white-color);
        }
        .modal-body .form-group input:focus,
        .modal-body .form-group select:focus,
        .modal-body .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 82, 212, 0.1);
        }
        /* NOU: Ajustare pentru butonul de anulare din modal */
        .modal-footer .crm-button.ghost {
            padding: 8px 20px;
            font-size: 0.9rem;
        }

        /* NOU: Stiluri pentru vizualizare detalii in modal */
        .booking-details-list {
            display: flex;
            flex-direction: column;
            gap: 14px;
        }
        .booking-details-item {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        .booking-details-item label {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--muted-color);
            text-transform: uppercase;
        }
        .booking-details-item p {
            font-size: 1rem;
            color: var(--dark-color);
            margin: 0;
        }

        /* NOU: Stiluri pentru calendarul Flatpickr, preluate din index.html */
        .flatpickr-calendar {
            background: var(--white-color);
            border-radius: var(--border-radius);
            box-shadow: 0 8px 25px var(--shadow-color);
            border: 1px solid var(--border-color);
            width: auto;
        }
        .flatpickr-day.selected, .flatpickr-day.startRange, .flatpickr-day.endRange,
        .flatpickr-day.selected:hover, .flatpickr-day.startRange:hover, .flatpickr-day.endRange:hover {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }
        .flatpickr-day:hover {
            background: var(--light-gray-color);
        }
        .flatpickr-day.today {
            border-color: var(--secondary-color);
        }
        .flatpickr-day.today:hover {
            border-color: var(--secondary-color);
            background: var(--secondary-color);
            color: var(--white-color);
        }
        .flatpickr-months .flatpickr-month, .flatpickr-weekdays, .numInputWrapper, .flatpickr-current-month .flatpickr-monthDropdown-months {
            color: var(--dark-color);
            fill: var(--dark-color);
        }

        /* NOU: Stiluri pentru graficul interactiv */
        .chart-tooltip {
            font-size: 0.8rem;
            font-weight: 600;
            fill: var(--primary-color);
            text-anchor: middle;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        .chart-point:hover .chart-tooltip {
            opacity: 1;
        }
        .chart-point {
            cursor: pointer;
        }


        /* NOU: Grid pentru grafice */
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 28px;
            align-items: stretch; /* NOU: Asigură înălțime egală pentru panouri */
        }

        @media (max-width: 1080px) {
            .chart-grid {
                grid-template-columns: 1fr; /* Responsiv: graficele se pilează pe verticală */
            }
        }

        /* NOU: Stiluri pentru Pie Chart */
        .pie-chart-container {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            gap: 32px;
            width: 100%;
            height: 100%;
            flex-wrap: wrap;
        }

        .pie-chart-svg {
            width: 160px;
            height: 160px;
            max-width: 100%;
            transform: rotate(-90deg);
        }

        .pie-slice {
            transition: transform 0.2s cubic-bezier(0.25, 1, 0.5, 1);
            cursor: pointer;
            transform-origin: center;
        }

        .pie-chart-legend {
            display: flex;
            flex-direction: column;
            gap: 10px;
            font-size: 0.75rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
        }


        @media (max-width: 1180px) {
            main.crm-shell {
                grid-template-columns: 1fr;
            }

            .crm-sidebar {
                position: relative;
                top: 0;
                height: auto;
                border-right: none;
                border-bottom: 1px solid var(--border-color);
                box-shadow: none;
            }

            .crm-pages {
                padding: 36px 24px 48px;
            }
        }

        @media (max-width: 720px) {
            .page-header {
                padding: 22px;
            }

            .page-header-top {
                flex-direction: column;
                align-items: flex-start;
            }

            .crm-pages {
                padding: 28px 16px 40px;
            }

            table.crm-table {
                min-width: 620px;
            }
            /* NOU: Grid pentru grafice pe mobil */
            .chart-grid {
                grid-template-columns: 1fr;
            }
            /* NOU: Grid pentru bookings pe mobil */
            .bookings-content-grid {
                grid-template-columns: 1fr;
                gap: 36px;
            }
            .bookings-legend {
                grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
                gap: 12px;
            }
        }
    </style>
</head>
<body>
    <div data-include="header.html"></div>
    <div data-include="mobile-menu.html"></div>

    <main class="crm-shell">
        <aside class="crm-sidebar">
            <div>
                <h2>CRM Proprietari</h2>
                <p>Gestionare completă pentru bookings, vizite și disponibilitate în timp real.</p>
            </div>

            <nav class="crm-nav" aria-label="Navigare CRM proprietari">
                <div class="crm-nav-section">
                    <label>Panou general</label>
                    <div class="crm-nav-links">
                        <button class="crm-nav-link is-active" type="button" data-page-target="overview">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12l2-2 7-7 7 7 2 2"/><path d="M5 10v10a1 1 0 0 0 1 1h4v-6h4v6h4a1 1 0 0 0 1-1V10"/></svg>
                            Overview
                        </button>
                        <button class="crm-nav-link" type="button" data-page-target="bookings">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H9a2 2 0 0 1-2-2V7"/><path d="M9 17h10"/><path d="M13 11h6"/><path d="M5 3h14a2 2 0 0 1 2 2v12"/><polyline points="5 7 5 21 19 21"/></svg>
                            Rezervări
                        </button>
                        <button class="crm-nav-link" type="button" data-page-target="viewings">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 3H6a2 2 0 0 0-2 2v14l4-4h10a2 2 0 0 0 2-2z"/></svg>
                            Programări vizionări
                        </button>
                        <button class="crm-nav-link" type="button" data-page-target="availability">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                            Disponibilitate
                        </button>
                        <button class="crm-nav-link" type="button" data-page-target="venues">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                            Locațiile mele
                        </button>
                    </div>
                </div>
                <div class="crm-nav-section">
                    <label>Comunicare & control</label>
                    <div class="crm-nav-links">
                        <button class="crm-nav-link" type="button" data-page-target="settings">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1Z"/></svg>
                            Setări
                        </button>
                    </div>
                </div>
            </nav>

            <!-- MODIFICAT: Înlocuit secțiunea de suport cu buton de logout -->
            <div class="crm-sidebar-footer" style="background: transparent; padding: 0; border: none;">
                <a href="login.html" class="crm-button ghost" style="width: 100%; justify-content: center; display: flex; align-items: center; gap: 8px;">
                    <svg style="width: 16px; height: 16px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                    Logout
                </a>
            </div>
        </aside>

        <section class="crm-pages">
            <section class="crm-page is-active" data-page="overview" id="overview">
                <div class="page-header">
                    <div class="page-header-top">
                        <div>
                            <h1>Overview operațional</h1>
                            <p>Monitorizează cererile noi, disponibilitatea confirmată și activările pentru toate locațiile tale.</p>
                        </div>
                        <div class="page-header-actions">
                            <button class="crm-button primary" type="button">Adaugă booking manual</button>
                            <button class="crm-button ghost" type="button">Exportă status</button>
                        </div>
                    </div>
                    <div class="context-tags">
                        <span class="context-tag">Locații active: 6</span>
                    </div>
                </div>

                <div class="metrics-grid">
                    <article class="metric-card">
                        <span>Booking-uri confirmate luna aceasta</span>
                        <strong>12</strong>
                        <div class="metric-trend">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 17 9 11 13 15 21 7"/></svg>
                            +3 vs luna trecută
                        </div>
                    </article>
                    <article class="metric-card">
                        <span>Cereri în așteptare răspuns</span>
                        <strong>5</strong>
                        <div class="metric-trend" style="color:#b7791f;">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><polyline points="19 12 12 19 5 12"/></svg>
                            răspunde în 12h
                        </div>
                    </article>
                    <article class="metric-card">
                        <span>Vizionări programate săptămână curentă</span>
                        <strong>8</strong>
                        <div class="metric-trend">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 17 9 11 13 15 21 7"/></svg>
                            90% confirmări
                        </div>
                    </article>
                    <article class="metric-card">
                        <span>Disponibilitate liberă weekend</span>
                        <strong>4</strong>
                        <div class="metric-trend" style="color:#0c4a6e;">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                            sugestie: promovați Villa Lac
                        </div>
                    </article>
                </div>

                <article class="panel">
                    <header>
                        <h2>Programări vizionări</h2>
                    </header>
                    <div class="list" id="overview-viewings-list"></div>
                </article>
                <article class="panel">
                    <header>
                        <h2>Flux rapid bookings</h2>
                        <span class="panel-meta">Cele mai recente cereri</span>
                    </header>
                    <div class="list" id="overview-bookings-list"></div>
                </article>
                <article class="panel">
                    <header>
                        <h2>Evenimente confirmate (următoarele 10 zile)</h2>
                    </header>
                    <div class="list" id="overview-events-list"></div>
                </article>

                <!-- Grafice -->
                <div class="chart-grid">
                    <article class="panel">
                        <header><h2>Distribuție pe tip de eveniment</h2></header>
                        <div class="panel-content" id="event-type-distribution-chart"></div>
                    </article>
                    <article class="panel">
                        <header><h2>Status vizionări (urm. 7 zile)</h2></header>
                        <div class="panel-content" id="viewings-status-chart"></div>
                    </article>
                </div>
                <article class="panel">
                    <header><h2>Grad de ocupare lunar (urm. 12 luni)</h2></header>
                    <div class="panel-content" id="monthly-occupancy-chart" style="min-height: 320px;"></div>
                </article>
            </section>

            <section class="crm-page" data-page="bookings" id="bookings">
                <div class="page-header">
                    <div class="page-header-top">
                        <div>
                            <h1>Gestionare Rezervări</h1>
                            <p>Centralizează toate cererile de evenimente, actualizează statusul și confirmă disponibilitatea.</p>
                        </div>
                        <div class="page-header-actions">
                            <button class="crm-button ghost" type="button">Filtre avansate</button>
                            <button class="crm-button primary" type="button" data-open-booking-modal>Adaugă rezervare</button>
                        </div>
                    </div>
                    <div class="context-tags">
                        <span class="context-tag">Cererile noi se sincronizează la 5 minute</span>
                    </div>
                </div>

                <div class="panel">
                    <header>
                        <h2>Toate cererile</h2>
                        <span class="panel-meta">Actualizează statusul pe măsură ce confirmi cu echipa ta</span>
                    </header>
                    <div id="automation-toast" class="automation-toast" role="status" aria-live="polite"></div>
                    <div class="filter-bar">
                        <label for="bookings-venue-filter">Locație:</label>
                        <select id="bookings-venue-filter"></select>
                        <label for="bookings-status-filter">Status:</label>
                        <select id="bookings-status-filter"></select>
                        <label for="bookings-client-filter">Client:</label>
                        <input type="text" id="bookings-client-filter" placeholder="Caută după nume client" style="max-width: 220px;">
                    </div>
                    <div class="table-wrapper">
                        <table class="crm-table" aria-describedby="bookings-table-caption">
                            <caption id="bookings-table-caption" style="text-align:left; font-weight:600; padding: 12px 0; font-size: 1rem; white-space: nowrap;">Rezervări pentru toate locațiile administrate</caption>
                            <thead>
                                <tr>
                                    <th>Rezervare · Status & acțiuni</th>
                                </tr>
                            </thead>
                            <tbody id="bookings-table-body"></tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section class="crm-page" data-page="viewings" id="viewings">
                <div class="page-header">
                    <div class="page-header-top">
                        <div>
                            <h1>Programări vizionări</h1>
                            <p>Confirmă programările și alocă gazde pentru fiecare vizionare în spațiile tale.</p>
                        </div>
                        <div class="page-header-actions">
                        </div>
                    </div>
                    <div class="context-tags">
                        <span class="context-tag">Rată confirmare vizite: 92%</span>
                    </div>
                </div>

                <div class="panel">
                    <header>
                        <h2>Programări viitoare</h2>
                        <span class="panel-meta">Verifică statusul pentru următoarele 14 zile</span>
                    </header>
                    <div class="filter-bar">
                        <label for="viewings-venue-filter">Locație:</label>
                        <select id="viewings-venue-filter"></select>
                    </div>
                    <div class="table-wrapper">
                        <table class="crm-table" aria-describedby="viewings-table-caption">
                            <caption id="viewings-table-caption" style="text-align:left; font-weight:600; padding: 12px 0;">Detalii vizionări și responsabil</caption>
                            <thead>
                                <tr>
                                    <th>Vizionare · Status & acțiuni</th>
                                </tr>
                            </thead>
                            <tbody id="viewings-table-body"></tbody>
                        </table>
                    </div>
                </div>

                <!-- NOU: Calendar pentru vizionări -->
                <div class="panel">
                    <header class="monthly-calendar-header">
                        <div class="filter-bar">
                            <label for="viewings-calendar-venue-filter">Calendar pentru locația:</label>
                            <select id="viewings-calendar-venue-filter"></select>
                        </div>
                        <div class="calendar-nav">
                            <button id="prev-viewings-month-btn" aria-label="Luna precedentă">&lt;</button>
                            <h2 id="viewings-month-year" style="margin:0;"></h2>
                            <button id="next-viewings-month-btn" aria-label="Luna următoare">&gt;</button>
                        </div>
                    </header>
                    <div class="monthly-calendar-grid" id="viewings-calendar-grid">
                        <!-- Calendarul vizionărilor va fi generat aici -->
                    </div>
                </div>

            </section>

            <section class="crm-page" data-page="availability" id="availability">
                <div class="page-header">
                    <div class="page-header-top">
                        <div>
                            <h1>Disponibilitate</h1>
                            <p>Verifică rapid intervalele ocupate, datele în hold și ferestrele deschise pentru rezervări.</p>
                        </div>
                        <div class="page-header-actions">
                            <button class="crm-button ghost" type="button">Actualizează manual</button>
                            <button class="crm-button primary" type="button">Importă din calendar</button>
                        </div>
                    </div>
                    <div class="context-tags">
                        <span class="context-tag">Integrare Google Calendar activă</span>
                        <span class="context-tag">Sincronizare iCal disponibilă</span>
                    </div>
                </div>

                <div class="panel">
                    <header class="monthly-calendar-header">
                        <div class="filter-bar">
                            <label for="availability-venue-filter">Vizualizare pentru:</label>
                            <select id="availability-venue-filter"></select>
                        </div>
                        <button id="today-availability-btn" class="crm-button ghost" style="padding: 8px 16px; font-size: 0.85rem; border-radius: 8px; margin-right: auto; margin-left: 16px;">Astăzi</button>
                        <div class="calendar-nav">
                            <button id="prev-month-btn" aria-label="Luna precedentă">&lt;</button>
                            <h2 id="availability-month-year" style="margin:0;"></h2>
                            <button id="next-month-btn" aria-label="Luna următoare">&gt;</button>
                        </div>
                        <button id="add-booking-calendar-btn" class="crm-button primary" style="padding: 8px 16px; font-size: 0.85rem;" data-open-booking-modal>Adaugă rezervare</button>
                    </header>
                    <div class="monthly-calendar-grid" id="availability-calendar-grid">
                        <!-- Zilele săptămânii vor fi adăugate aici de JS -->
                    </div>
                    <div class="availability-legend" style="margin-top: 10px;">
                        <span class="legend-item"><span class="legend-dot" style="background-color: #0052D4;"></span> Rezervat</span>
                        <span class="legend-item"><span class="legend-dot" style="background-color: #0d9488;"></span> Pre-rezervat</span>
                        <span class="legend-item"><span class="legend-dot" style="background-color: #7c3aed;"></span> Creat manual</span>
                    </div>
                </div>

                <!-- NOU: Modal pentru adăugare booking -->
                <div id="add-booking-modal" class="modal-overlay">
                    <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="modal-title">
                        <div class="modal-header">
                            <h3 id="modal-title">Adaugă Rezervare Manuală</h3>
                            <button class="modal-close-btn" aria-label="Închide">&times;</button>
                        </div>
                        <form id="add-booking-form">
                            <div class="modal-body">
                                <div class="form-group" style="gap: 8px;">
                                    <label for="booking-client">Nume Client</label>
                                    <input type="text" id="booking-client" name="client" required>
                                </div>
                                <div class="form-group-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                                    <div class="form-group">
                                        <label for="booking-email">Email</label>
                                        <input type="email" id="booking-email" name="email" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="booking-phone">Nr. telefon</label>
                                        <input type="tel" id="booking-phone" name="phone" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="booking-event-type">Tip Eveniment</label>
                                    <select id="booking-event-type" name="event" required>
                                        <option value="Nuntă">Nuntă</option>
                                        <option value="Botez">Botez</option>
                                        <option value="Eveniment Corporate">Eveniment Corporate</option>
                                        <option value="Cununie Civilă">Cununie Civilă</option>
                                        <option value="Petrecere Privată">Petrecere Privată</option>
                                        <option value="Conferință">Conferință</option>
                                    </select>
                                </div>
                                <div class="form-group-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                                    <div class="form-group">
                                        <label for="booking-venue">Locație</label>
                                    <select id="booking-venue" name="venue" required></select>
                                    </div>
                                    <div class="form-group">
                                        <label for="booking-date">Data</label>
                                    <input type="text" id="booking-date" name="date" required placeholder="Selectează data">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="booking-guests">Nr. invitați</label>
                                    <input type="number" id="booking-guests" name="guests" min="1" required>
                                </div>
                                <div class="form-group">
                                    <label for="booking-details">Alte detalii</label>
                                    <textarea id="booking-details" name="details" rows="3" placeholder="Ex: preferințe meniu, cerințe speciale..."></textarea>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="crm-button ghost modal-close-btn">Anulează</button>
                                <button type="submit" class="crm-button primary">Salvează</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- NOU: Modal pentru vizualizare detalii booking -->
                <div id="view-booking-modal" class="modal-overlay">
                    <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="edit-modal-title">
                        <div class="modal-header">
                            <h3 id="edit-modal-title">Editează Rezervare</h3>
                            <button class="modal-close-btn" aria-label="Închide">&times;</button>
                        </div>
                        <form id="edit-booking-form">
                            <input type="hidden" id="edit-booking-id">
                            <div class="modal-body">
                                <div class="form-group">
                                    <label for="edit-booking-client">Nume Client</label>
                                    <input type="text" id="edit-booking-client" name="client" required>
                                </div>
                                <div class="form-group-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                                    <div class="form-group">
                                        <label for="edit-booking-email">Email</label>
                                        <input type="email" id="edit-booking-email" name="email" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-booking-phone">Nr. telefon</label>
                                        <input type="tel" id="edit-booking-phone" name="phone" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="edit-booking-event-type">Tip Eveniment</label>
                                    <select id="edit-booking-event-type" name="event" required></select>
                                </div>
                                <div class="form-group-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                                    <div class="form-group">
                                        <label for="edit-booking-venue">Locație</label>
                                        <select id="edit-booking-venue" name="venue" required></select>
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-booking-guests">Nr. invitați</label>
                                        <input type="number" id="edit-booking-guests" name="guests" min="1" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="edit-booking-details">Alte detalii</label>
                                    <textarea id="edit-booking-details" name="details" rows="3" placeholder="Ex: preferințe meniu, cerințe speciale..."></textarea>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="crm-button ghost modal-close-btn">Anulează</button>
                                <button type="submit" class="crm-button primary">Salvează Modificări</button>
                            </div>
                        </form>
                    </div>
                </div>


            </section>

            <section class="crm-page" data-page="venues" id="venues">
                <div class="page-header">
                    <div class="page-header-top">
                        <div>
                            <h1>Administrare locații</h1>
                            <p>Actualizează detalii, capacități și echipe de contact pentru spațiile din portofoliu.</p>
                        </div>
                        <div class="page-header-actions">
                            <button class="crm-button ghost" type="button">Importă din fișier</button>
                            <a href="create-venue.html" class="crm-button primary">Locație nouă</a>
                        </div>
                    </div>
                    <div class="context-tags">
                        <span class="context-tag">6 locații active · 1 în onboarding</span>
                    </div>
                </div>

                <div class="venue-grid" id="venue-cards"></div>
            </section>

            <section class="crm-page" data-page="settings" id="settings">
                <div class="page-header">
                    <div class="page-header-top">
                        <div>
                            <h1>Setări & preferințe</h1>
                            <p>Configurează notificările, fluxurile automate și accesul echipei pentru contul tău.</p>
                        </div>
                        <div class="page-header-actions">
                            <button class="crm-button ghost" type="button">Resetează</button>
                            <button class="crm-button primary" type="button">Salvează modificări</button>
                        </div>
                    </div>
                </div>

                <div class="settings-grid">
                    <section class="settings-card">
                        <header>
                            <h2>Notificări</h2>
                            <span class="panel-meta">Primește update-uri relevante</span>
                        </header>
                        <div class="settings-toggle">
                            <span>Email pentru booking nou</span>
                            <input type="checkbox" checked>
                        </div>
                        <div class="settings-toggle">
                            <span>Push pentru vizite reprogramate</span>
                            <input type="checkbox" checked>
                        </div>
                        <div class="settings-toggle">
                            <span>Rezumat săptămânal disponibilitate</span>
                            <input type="checkbox">
                        </div>
                    </section>

                    <section class="settings-card">
                        <header>
                            <h2>Automatizări CRM Venue</h2>
                            <span class="panel-meta">Automatizează sincronizarea statusurilor</span>
                        </header>
                        <div class="settings-toggle">
                            <span>
                                <strong>Trimite automat ofertă după confirmarea disponibilității</strong>
                                <small>Oferta standard pleacă imediat către client și statusurile ambelor CRM-uri se actualizează.</small>
                            </span>
                            <input type="checkbox" id="auto-offer-toggle" checked>
                        </div>
                        <p class="settings-helper"><strong>Confirmă disponibilitatea:</strong> „Data este liberă. Poți trimite automat oferta dacă ai activată opțiunea din setări.”</p>
                        <p class="settings-helper"><strong>Ofertă automată:</strong> „Oferta standard a fost trimisă automat după confirmarea disponibilității.”</p>
                    </section>

                    <section class="settings-card">
                        <header>
                            <h2>Acces echipă</h2>
                            <span class="panel-meta">Gestionează utilizatorii colaboratori</span>
                        </header>
                        <div class="list">
                            <div class="list-item">
                                <div>
                                    <strong>Andreea Ionescu</strong>
                                </div>
                                <div class="list-item-actions">
                                    <span class="status-chip" data-status="confirmed">Activ</span>
                                    <button class="crm-button ghost sm" type="button">Modifică acces</button>
                                </div>
                            </div>
                            <div class="list-item">
                                <div>
                                    <strong>Paul Radu</strong>
                                </div>
                                <div class="list-item-actions">
                                    <span class="status-chip" data-status="confirmed">Activ</span>
                                    <button class="crm-button ghost sm" type="button">Gestionează rol</button>
                                </div>
                            </div>
                            <div class="list-item">
                                <div>
                                    <strong>Ana Dobre</strong>
                                </div>
                                <div class="list-item-actions">
                                    <span class="status-chip" data-status="pending">Invitație trimisă</span>
                                    <button class="crm-button primary sm" type="button">Retrimite invitație</button>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section class="settings-card wide">
                        <header>
                            <h2>Detalii companie</h2>
                            <span class="panel-meta">Actualizează datele oficiale pentru facturare</span>
                        </header>
                        <label for="company-name">Nume companie</label>
                        <input id="company-name" type="text" placeholder="Ex: Ouido Events SRL">
                        <label for="company-cui">CUI</label>
                        <input id="company-cui" type="text" placeholder="Ex: RO12345678">
                        <label for="company-email">Adresă de email</label>
                        <input id="company-email" type="email" placeholder="Ex: contact@companie.ro">
                        <label for="company-phone">Număr de telefon</label>
                        <input id="company-phone" type="tel" placeholder="Ex: 021 123 4567">
                        <label for="company-address">Adresă sediu social</label>
                        <textarea id="company-address" rows="2" placeholder="Str. Exemplu nr. 10, București"></textarea>
                        <label for="company-contact">Persoană de contact</label>
                        <input id="company-contact" type="text" placeholder="Ex: Andreea Marin">
                    </section>
                </div>
            </section>

            <section class="crm-page" data-page="record-detail" id="record-detail">
                <div class="page-header">
                    <div class="detail-header">
                        <div>
                            <h1 id="record-detail-heading">Detalii înregistrare</h1>
                            <p class="panel-meta" id="record-detail-subtitle">Consultă informațiile partajate de client pentru această solicitare.</p>
                        </div>
                        <button type="button" class="crm-button ghost" id="record-detail-back">Înapoi la listă</button>
                    </div>
                </div>
                <div class="detail-layout">
                    <div class="detail-sections">
                        <article class="detail-card">
                            <h3>Informații client</h3>
                            <div class="detail-list">
                                <div class="detail-list-item">
                                    <span class="detail-list-label">Client</span>
                                    <span class="detail-list-value" data-detail-field="client">—</span>
                                </div>
                                <div class="detail-list-item">
                                    <span class="detail-list-label">Status</span>
                                    <span class="detail-list-value" data-detail-field="status">—</span>
                                </div>
                                <div class="detail-list-item">
                                    <span class="detail-list-label">Email</span>
                                    <span class="detail-list-value" data-detail-field="email">—</span>
                                </div>
                                <div class="detail-list-item">
                                    <span class="detail-list-label">Telefon</span>
                                    <span class="detail-list-value" data-detail-field="phone">—</span>
                                </div>
                                <div class="detail-list-item">
                                    <span class="detail-list-label">Tip eveniment</span>
                                    <span class="detail-list-value" data-detail-field="event">—</span>
                                </div>
                                <div class="detail-list-item">
                                    <span class="detail-list-label">Număr invitați</span>
                                    <span class="detail-list-value" data-detail-field="guests">—</span>
                                </div>
                            </div>
                        </article>
                        <article class="detail-card">
                            <h3>Logistică</h3>
                            <div class="detail-list">
                                <div class="detail-list-item">
                                    <span class="detail-list-label">Locație</span>
                                    <span class="detail-list-value" data-detail-field="venue">—</span>
                                </div>
                                <div class="detail-list-item">
                                    <span class="detail-list-label" data-detail-date-label>Dată eveniment</span>
                                    <span class="detail-list-value" data-detail-field="date">—</span>
                                </div>
                                <div class="detail-list-item" data-detail-viewing-date-wrapper hidden>
                                    <span class="detail-list-label">Dată vizionare</span>
                                    <span class="detail-list-value" data-detail-field="viewingDate">—</span>
                                </div>
                                <div class="detail-list-item" data-detail-viewing-time-wrapper hidden>
                                    <span class="detail-list-label">Ora vizionare</span>
                                    <span class="detail-list-value" data-detail-field="viewingTime">—</span>
                                </div>
                                <div class="detail-list-item">
                                    <span class="detail-list-label">Ultima actualizare</span>
                                    <span class="detail-list-value" data-detail-field="updatedAt">—</span>
                                </div>
                            </div>
                        </article>
                    </div>
                    <article class="detail-card detail-timeline-card">
                        <h3>Timeline status</h3>
                        <p class="panel-meta" style="margin:0;">Istoric modificări manuale și automate ale rezervării.</p>
                        <ul class="detail-timeline-list" data-detail-timeline></ul>
                        <p class="detail-timeline-empty" data-detail-timeline-empty hidden>Nu există acțiuni înregistrate încă.</p>
                    </article>
                    <article class="detail-card">
                        <h3>Notă internă</h3>
                        <p class="panel-meta" style="margin:0;">Folosește această secțiune pentru follow-up și contextul discutat cu clientul.</p>
                        <div class="detail-note-area">
                            <div class="detail-note-header">
                                <span>Înregistrare</span>
                                <button type="button" class="crm-button primary sm" id="record-detail-save">Salvează nota</button>
                            </div>
                            <textarea id="record-detail-note" class="detail-note-input" placeholder="Nu există notițe salvate pentru această solicitare."></textarea>
                        </div>
                    </article>
                </div>
            </section>
        </section>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="main.js"></script>
    <script src="owner-crm.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/plugins/monthSelect/index.js"></script>
</body>
</html>
